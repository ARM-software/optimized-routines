// polynomial for approximating log10(1+x) in double precision
//
// Copyright (c) 2025, Arm Limited.
// SPDX-License-Identifier: MIT OR Apache-2.0 WITH LLVM-exception

deg = 20;

a = sqrt(2)/2-1;
b = sqrt(2)-1;

f = proc(y) {
  return log10(1+y);
};

poly = fpminimax(f(x), deg, [|double ...|], [a;b]);

print("coeffs:");
display = hexadecimal;
for i from 0 to deg do coeff(poly,i);
print("rel error:",  dirtyinfnorm(1-poly(x)/f(x), [a;b], 30));
print("in [",a,b,"]");
